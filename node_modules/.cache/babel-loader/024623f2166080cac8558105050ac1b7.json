{"ast":null,"code":"/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nvar Observable = /*@__PURE__*/function () {\n  function Observable(subscribe) {\n    this._isScalar = false;\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n  Observable.prototype.lift = function (operator) {\n    var observable = new Observable();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  };\n  Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n    var operator = this.operator;\n    var sink = toSubscriber(observerOrNext, error, complete);\n    if (operator) {\n      sink.add(operator.call(sink, this.source));\n    } else {\n      sink.add(this.source || config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable ? this._subscribe(sink) : this._trySubscribe(sink));\n    }\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      if (sink.syncErrorThrowable) {\n        sink.syncErrorThrowable = false;\n        if (sink.syncErrorThrown) {\n          throw sink.syncErrorValue;\n        }\n      }\n    }\n    return sink;\n  };\n  Observable.prototype._trySubscribe = function (sink) {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        sink.syncErrorThrown = true;\n        sink.syncErrorValue = err;\n      }\n      if (canReportError(sink)) {\n        sink.error(err);\n      } else {\n        console.warn(err);\n      }\n    }\n  };\n  Observable.prototype.forEach = function (next, promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var subscription;\n      subscription = _this.subscribe(function (value) {\n        try {\n          next(value);\n        } catch (err) {\n          reject(err);\n          if (subscription) {\n            subscription.unsubscribe();\n          }\n        }\n      }, reject, resolve);\n    });\n  };\n  Observable.prototype._subscribe = function (subscriber) {\n    var source = this.source;\n    return source && source.subscribe(subscriber);\n  };\n  Observable.prototype[Symbol_observable] = function () {\n    return this;\n  };\n  Observable.prototype.pipe = function () {\n    var operations = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      operations[_i] = arguments[_i];\n    }\n    if (operations.length === 0) {\n      return this;\n    }\n    return pipeFromArray(operations)(this);\n  };\n  Observable.prototype.toPromise = function (promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var value;\n      _this.subscribe(function (x) {\n        return value = x;\n      }, function (err) {\n        return reject(err);\n      }, function () {\n        return resolve(value);\n      });\n    });\n  };\n  Observable.create = function (subscribe) {\n    return new Observable(subscribe);\n  };\n  return Observable;\n}();\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n  if (!promiseCtor) {\n    promiseCtor = config.Promise || Promise;\n  }\n  if (!promiseCtor) {\n    throw new Error('no Promise impl found');\n  }\n  return promiseCtor;\n}","map":{"version":3,"names":["canReportError","toSubscriber","observable","Symbol_observable","pipeFromArray","config","Observable","subscribe","_isScalar","_subscribe","prototype","lift","operator","source","observerOrNext","error","complete","sink","add","call","useDeprecatedSynchronousErrorHandling","syncErrorThrowable","_trySubscribe","syncErrorThrown","syncErrorValue","err","console","warn","forEach","next","promiseCtor","_this","getPromiseCtor","resolve","reject","subscription","value","unsubscribe","subscriber","pipe","_i","arguments","length","operations","toPromise","x","create","Promise","Error"],"sources":["../../src/internal/Observable.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module"}