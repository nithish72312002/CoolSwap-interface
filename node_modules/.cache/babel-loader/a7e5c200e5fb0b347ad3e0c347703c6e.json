{"ast":null,"code":"import _classCallCheck from \"E:\\\\testprojects\\\\CoolSwap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\testprojects\\\\CoolSwap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"E:\\\\testprojects\\\\CoolSwap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"E:\\\\testprojects\\\\CoolSwap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nimport EventEmitter from \"eventemitter3\";\nimport { XMLHttpRequest } from \"xhr2-cookies\";\nimport { getFromWindow } from \"@walletconnect/utils\";\nvar XHR = getFromWindow(\"XMLHttpRequest\") || XMLHttpRequest;\nvar HTTPConnection = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(HTTPConnection, _EventEmitter);\n  var _super = _createSuper(HTTPConnection);\n  function HTTPConnection(url) {\n    var _this;\n    _classCallCheck(this, HTTPConnection);\n    _this = _super.call(this);\n    _this.url = url;\n    return _this;\n  }\n  _createClass(HTTPConnection, [{\n    key: \"formatError\",\n    value: function formatError(payload, message) {\n      var code = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n      return {\n        error: {\n          message: message,\n          code: code\n        },\n        id: payload.id,\n        jsonrpc: payload.jsonrpc\n      };\n    }\n  }, {\n    key: \"send\",\n    value: function send(payload, internal) {\n      var _this2 = this;\n      return new Promise(function (resolve) {\n        if (payload.method === \"eth_subscribe\") {\n          var error = _this2.formatError(payload, \"Subscriptions are not supported by this HTTP endpoint\");\n          _this2.emit(\"error\", error);\n          return resolve(error);\n        }\n        var xhr = new XHR();\n        var responded = false;\n        var res = function res(err, result) {\n          if (!responded) {\n            xhr.abort();\n            responded = true;\n            if (internal) {\n              internal(err, result);\n            } else {\n              var id = payload.id,\n                jsonrpc = payload.jsonrpc;\n              var response = err ? {\n                id: id,\n                jsonrpc: jsonrpc,\n                error: {\n                  message: err.message,\n                  code: err.code\n                }\n              } : {\n                id: id,\n                jsonrpc: jsonrpc,\n                result: result\n              };\n              _this2.emit(\"payload\", response);\n              resolve(response);\n            }\n          }\n        };\n        xhr.open(\"POST\", _this2.url, true);\n        xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n        xhr.timeout = 60 * 1000;\n        xhr.onerror = res;\n        xhr.ontimeout = res;\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState === 4) {\n            try {\n              var response = JSON.parse(xhr.responseText);\n              res(response.error, response.result);\n            } catch (e) {\n              res(e);\n            }\n          }\n        };\n        xhr.send(JSON.stringify(payload));\n      });\n    }\n  }]);\n  return HTTPConnection;\n}(EventEmitter);\nexport default HTTPConnection;","map":{"version":3,"names":["EventEmitter","XMLHttpRequest","getFromWindow","XHR","HTTPConnection","_EventEmitter","_inherits","_super","_createSuper","url","_this","_classCallCheck","call","_createClass","key","value","formatError","payload","message","code","arguments","length","undefined","error","id","jsonrpc","send","internal","_this2","Promise","resolve","method","emit","xhr","responded","res","err","result","abort","response","open","setRequestHeader","timeout","onerror","ontimeout","onreadystatechange","readyState","JSON","parse","responseText","e","stringify"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module"}