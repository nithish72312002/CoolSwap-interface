{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(Subscriber, _super);\n  function Subscriber(destinationOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n    _this.syncErrorValue = null;\n    _this.syncErrorThrown = false;\n    _this.syncErrorThrowable = false;\n    _this.isStopped = false;\n    switch (arguments.length) {\n      case 0:\n        _this.destination = emptyObserver;\n        break;\n      case 1:\n        if (!destinationOrNext) {\n          _this.destination = emptyObserver;\n          break;\n        }\n        if (typeof destinationOrNext === 'object') {\n          if (destinationOrNext instanceof Subscriber) {\n            _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n            _this.destination = destinationOrNext;\n            destinationOrNext.add(_this);\n          } else {\n            _this.syncErrorThrowable = true;\n            _this.destination = new SafeSubscriber(_this, destinationOrNext);\n          }\n          break;\n        }\n      default:\n        _this.syncErrorThrowable = true;\n        _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n        break;\n    }\n    return _this;\n  }\n  Subscriber.prototype[rxSubscriberSymbol] = function () {\n    return this;\n  };\n  Subscriber.create = function (next, error, complete) {\n    var subscriber = new Subscriber(next, error, complete);\n    subscriber.syncErrorThrowable = false;\n    return subscriber;\n  };\n  Subscriber.prototype.next = function (value) {\n    if (!this.isStopped) {\n      this._next(value);\n    }\n  };\n  Subscriber.prototype.error = function (err) {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._error(err);\n    }\n  };\n  Subscriber.prototype.complete = function () {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._complete();\n    }\n  };\n  Subscriber.prototype.unsubscribe = function () {\n    if (this.closed) {\n      return;\n    }\n    this.isStopped = true;\n    _super.prototype.unsubscribe.call(this);\n  };\n  Subscriber.prototype._next = function (value) {\n    this.destination.next(value);\n  };\n  Subscriber.prototype._error = function (err) {\n    this.destination.error(err);\n    this.unsubscribe();\n  };\n  Subscriber.prototype._complete = function () {\n    this.destination.complete();\n    this.unsubscribe();\n  };\n  Subscriber.prototype._unsubscribeAndRecycle = function () {\n    var _parentOrParents = this._parentOrParents;\n    this._parentOrParents = null;\n    this.unsubscribe();\n    this.closed = false;\n    this.isStopped = false;\n    this._parentOrParents = _parentOrParents;\n    return this;\n  };\n  return Subscriber;\n}(Subscription);\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(SafeSubscriber, _super);\n  function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n    _this._parentSubscriber = _parentSubscriber;\n    var next;\n    var context = _this;\n    if (isFunction(observerOrNext)) {\n      next = observerOrNext;\n    } else if (observerOrNext) {\n      next = observerOrNext.next;\n      error = observerOrNext.error;\n      complete = observerOrNext.complete;\n      if (observerOrNext !== emptyObserver) {\n        context = Object.create(observerOrNext);\n        if (isFunction(context.unsubscribe)) {\n          _this.add(context.unsubscribe.bind(context));\n        }\n        context.unsubscribe = _this.unsubscribe.bind(_this);\n      }\n    }\n    _this._context = context;\n    _this._next = next;\n    _this._error = error;\n    _this._complete = complete;\n    return _this;\n  }\n  SafeSubscriber.prototype.next = function (value) {\n    if (!this.isStopped && this._next) {\n      var _parentSubscriber = this._parentSubscriber;\n      if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n        this.__tryOrUnsub(this._next, value);\n      } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n        this.unsubscribe();\n      }\n    }\n  };\n  SafeSubscriber.prototype.error = function (err) {\n    if (!this.isStopped) {\n      var _parentSubscriber = this._parentSubscriber;\n      var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n      if (this._error) {\n        if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._error, err);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, this._error, err);\n          this.unsubscribe();\n        }\n      } else if (!_parentSubscriber.syncErrorThrowable) {\n        this.unsubscribe();\n        if (useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        }\n        hostReportError(err);\n      } else {\n        if (useDeprecatedSynchronousErrorHandling) {\n          _parentSubscriber.syncErrorValue = err;\n          _parentSubscriber.syncErrorThrown = true;\n        } else {\n          hostReportError(err);\n        }\n        this.unsubscribe();\n      }\n    }\n  };\n  SafeSubscriber.prototype.complete = function () {\n    var _this = this;\n    if (!this.isStopped) {\n      var _parentSubscriber = this._parentSubscriber;\n      if (this._complete) {\n        var wrappedComplete = function wrappedComplete() {\n          return _this._complete.call(_this._context);\n        };\n        if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(wrappedComplete);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n          this.unsubscribe();\n        }\n      } else {\n        this.unsubscribe();\n      }\n    }\n  };\n  SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      this.unsubscribe();\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        throw err;\n      } else {\n        hostReportError(err);\n      }\n    }\n  };\n  SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n    if (!config.useDeprecatedSynchronousErrorHandling) {\n      throw new Error('bad call');\n    }\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        parent.syncErrorValue = err;\n        parent.syncErrorThrown = true;\n        return true;\n      } else {\n        hostReportError(err);\n        return true;\n      }\n    }\n    return false;\n  };\n  SafeSubscriber.prototype._unsubscribe = function () {\n    var _parentSubscriber = this._parentSubscriber;\n    this._context = null;\n    this._parentSubscriber = null;\n    _parentSubscriber.unsubscribe();\n  };\n  return SafeSubscriber;\n}(Subscriber);\nexport { SafeSubscriber };","map":{"version":3,"names":["tslib_1","isFunction","empty","emptyObserver","Subscription","rxSubscriber","rxSubscriberSymbol","config","hostReportError","Subscriber","_super","__extends","destinationOrNext","error","complete","_this","call","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","arguments","length","destination","add","SafeSubscriber","prototype","create","next","subscriber","value","_next","err","_error","_complete","unsubscribe","closed","_unsubscribeAndRecycle","_parentOrParents","_parentSubscriber","observerOrNext","context","Object","bind","_context","useDeprecatedSynchronousErrorHandling","__tryOrUnsub","__tryOrSetError","wrappedComplete","fn","parent","Error","_unsubscribe"],"sources":["../../src/internal/Subscriber.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module"}