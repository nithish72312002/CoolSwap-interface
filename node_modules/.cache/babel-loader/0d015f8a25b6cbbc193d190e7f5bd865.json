{"ast":null,"code":"\"use strict\";\n\nvar _createClass = require(\"E:\\\\testprojects\\\\CoolSwap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\nvar _classCallCheck = require(\"E:\\\\testprojects\\\\CoolSwap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\nvar _inherits = require(\"E:\\\\testprojects\\\\CoolSwap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/inherits\");\nvar _createSuper = require(\"E:\\\\testprojects\\\\CoolSwap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createSuper\");\nvar _wrapNativeSuper = require(\"E:\\\\testprojects\\\\CoolSwap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/wrapNativeSuper\");\nvar _objectSpread = require(\"E:\\\\testprojects\\\\CoolSwap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/objectSpread2\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mapToCurveSimpleSWU = exports.SWUFpSqrtRatio = exports.weierstrass = exports.weierstrassPoints = exports.DER = void 0;\n/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n// Short Weierstrass curve. The formula is: y² = x³ + ax + b\nvar mod = require(\"./modular.js\");\nvar ut = require(\"./utils.js\");\nvar utils_js_1 = require(\"./utils.js\");\nvar curve_js_1 = require(\"./curve.js\");\nfunction validatePointOpts(curve) {\n  var opts = (0, curve_js_1.validateBasic)(curve);\n  ut.validateObject(opts, {\n    a: 'field',\n    b: 'field'\n  }, {\n    allowedPrivateKeyLengths: 'array',\n    wrapPrivateKey: 'boolean',\n    isTorsionFree: 'function',\n    clearCofactor: 'function',\n    allowInfinityPoint: 'boolean',\n    fromBytes: 'function',\n    toBytes: 'function'\n  });\n  var endo = opts.endo,\n    Fp = opts.Fp,\n    a = opts.a;\n  if (endo) {\n    if (!Fp.eql(a, Fp.ZERO)) {\n      throw new Error('Endomorphism can only be defined for Koblitz curves that have a=0');\n    }\n    if (typeof endo !== 'object' || typeof endo.beta !== 'bigint' || typeof endo.splitScalar !== 'function') {\n      throw new Error('Expected endomorphism with beta: bigint and splitScalar: function');\n    }\n  }\n  return Object.freeze(_objectSpread({}, opts));\n}\n// ASN.1 DER encoding utilities\nvar b2n = ut.bytesToNumberBE,\n  h2b = ut.hexToBytes;\nexports.DER = {\n  // asn.1 DER encoding utils\n  Err: /*#__PURE__*/function (_Error) {\n    _inherits(DERErr, _Error);\n    var _super = _createSuper(DERErr);\n    function DERErr() {\n      var m = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      _classCallCheck(this, DERErr);\n      return _super.call(this, m);\n    }\n    return _createClass(DERErr);\n  }( /*#__PURE__*/_wrapNativeSuper(Error)),\n  _parseInt: function _parseInt(data) {\n    var E = exports.DER.Err;\n    if (data.length < 2 || data[0] !== 0x02) throw new E('Invalid signature integer tag');\n    var len = data[1];\n    var res = data.subarray(2, len + 2);\n    if (!len || res.length !== len) throw new E('Invalid signature integer: wrong length');\n    // https://crypto.stackexchange.com/a/57734 Leftmost bit of first byte is 'negative' flag,\n    // since we always use positive integers here. It must always be empty:\n    // - add zero byte if exists\n    // - if next byte doesn't have a flag, leading zero is not allowed (minimal encoding)\n    if (res[0] & 128) throw new E('Invalid signature integer: negative');\n    if (res[0] === 0x00 && !(res[1] & 128)) throw new E('Invalid signature integer: unnecessary leading zero');\n    return {\n      d: b2n(res),\n      l: data.subarray(len + 2)\n    }; // d is data, l is left\n  },\n  toSig: function toSig(hex) {\n    // parse DER signature\n    var E = exports.DER.Err;\n    var data = typeof hex === 'string' ? h2b(hex) : hex;\n    if (!(data instanceof Uint8Array)) throw new Error('ui8a expected');\n    var l = data.length;\n    if (l < 2 || data[0] != 0x30) throw new E('Invalid signature tag');\n    if (data[1] !== l - 2) throw new E('Invalid signature: incorrect length');\n    var _exports$DER$_parseIn = exports.DER._parseInt(data.subarray(2)),\n      r = _exports$DER$_parseIn.d,\n      sBytes = _exports$DER$_parseIn.l;\n    var _exports$DER$_parseIn2 = exports.DER._parseInt(sBytes),\n      s = _exports$DER$_parseIn2.d,\n      rBytesLeft = _exports$DER$_parseIn2.l;\n    if (rBytesLeft.length) throw new E('Invalid signature: left bytes after parsing');\n    return {\n      r: r,\n      s: s\n    };\n  },\n  hexFromSig: function hexFromSig(sig) {\n    // Add leading zero if first byte has negative bit enabled. More details in '_parseInt'\n    var slice = function slice(s) {\n      return Number.parseInt(s[0], 16) & 8 ? '00' + s : s;\n    };\n    var h = function h(num) {\n      var hex = num.toString(16);\n      return hex.length & 1 ? \"0\".concat(hex) : hex;\n    };\n    var s = slice(h(sig.s));\n    var r = slice(h(sig.r));\n    var shl = s.length / 2;\n    var rhl = r.length / 2;\n    var sl = h(shl);\n    var rl = h(rhl);\n    return \"30\".concat(h(rhl + shl + 4), \"02\").concat(rl).concat(r, \"02\").concat(sl).concat(s);\n  }\n};\n// Be friendly to bad ECMAScript parsers by not using bigint literals\n// prettier-ignore\nvar _0n = BigInt(0),\n  _1n = BigInt(1),\n  _2n = BigInt(2),\n  _3n = BigInt(3),\n  _4n = BigInt(4);\nfunction weierstrassPoints(opts) {\n  var CURVE = validatePointOpts(opts);\n  var Fp = CURVE.Fp; // All curves has same field / group length as for now, but they can differ\n  var toBytes = CURVE.toBytes || function (c, point, isCompressed) {\n    var a = point.toAffine();\n    return ut.concatBytes(Uint8Array.from([0x04]), Fp.toBytes(a.x), Fp.toBytes(a.y));\n  };\n  var fromBytes = CURVE.fromBytes || function (bytes) {\n    // const head = bytes[0];\n    var tail = bytes.subarray(1);\n    // if (head !== 0x04) throw new Error('Only non-compressed encoding is supported');\n    var x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n    var y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n    return {\n      x: x,\n      y: y\n    };\n  };\n  /**\n   * y² = x³ + ax + b: Short weierstrass curve formula\n   * @returns y²\n   */\n  function weierstrassEquation(x) {\n    var a = CURVE.a,\n      b = CURVE.b;\n    var x2 = Fp.sqr(x); // x * x\n    var x3 = Fp.mul(x2, x); // x2 * x\n    return Fp.add(Fp.add(x3, Fp.mul(x, a)), b); // x3 + a * x + b\n  }\n  // Validate whether the passed curve params are valid.\n  // We check if curve equation works for generator point.\n  // `assertValidity()` won't work: `isTorsionFree()` is not available at this point in bls12-381.\n  // ProjectivePoint class has not been initialized yet.\n  if (!Fp.eql(Fp.sqr(CURVE.Gy), weierstrassEquation(CURVE.Gx))) throw new Error('bad generator point: equation left != right');\n  // Valid group elements reside in range 1..n-1\n  function isWithinCurveOrder(num) {\n    return typeof num === 'bigint' && _0n < num && num < CURVE.n;\n  }\n  function assertGE(num) {\n    if (!isWithinCurveOrder(num)) throw new Error('Expected valid bigint: 0 < bigint < curve.n');\n  }\n  // Validates if priv key is valid and converts it to bigint.\n  // Supports options allowedPrivateKeyLengths and wrapPrivateKey.\n  function normPrivateKeyToScalar(key) {\n    var lengths = CURVE.allowedPrivateKeyLengths,\n      nByteLength = CURVE.nByteLength,\n      wrapPrivateKey = CURVE.wrapPrivateKey,\n      n = CURVE.n;\n    if (lengths && typeof key !== 'bigint') {\n      if (key instanceof Uint8Array) key = ut.bytesToHex(key);\n      // Normalize to hex string, pad. E.g. P521 would norm 130-132 char hex to 132-char bytes\n      if (typeof key !== 'string' || !lengths.includes(key.length)) throw new Error('Invalid key');\n      key = key.padStart(nByteLength * 2, '0');\n    }\n    var num;\n    try {\n      num = typeof key === 'bigint' ? key : ut.bytesToNumberBE((0, utils_js_1.ensureBytes)('private key', key, nByteLength));\n    } catch (error) {\n      throw new Error(\"private key must be \".concat(nByteLength, \" bytes, hex or bigint, not \").concat(typeof key));\n    }\n    if (wrapPrivateKey) num = mod.mod(num, n); // disabled by default, enabled for BLS\n    assertGE(num); // num in range [1..N-1]\n    return num;\n  }\n  var pointPrecomputes = new Map();\n  function assertPrjPoint(other) {\n    if (!(other instanceof Point)) throw new Error('ProjectivePoint expected');\n  }\n  /**\n   * Projective Point works in 3d / projective (homogeneous) coordinates: (x, y, z) ∋ (x=x/z, y=y/z)\n   * Default Point works in 2d / affine coordinates: (x, y)\n   * We're doing calculations in projective, because its operations don't require costly inversion.\n   */\n  var Point = /*#__PURE__*/function () {\n    function Point(px, py, pz) {\n      _classCallCheck(this, Point);\n      this.px = px;\n      this.py = py;\n      this.pz = pz;\n      if (px == null || !Fp.isValid(px)) throw new Error('x required');\n      if (py == null || !Fp.isValid(py)) throw new Error('y required');\n      if (pz == null || !Fp.isValid(pz)) throw new Error('z required');\n    }\n    // Does not validate if the point is on-curve.\n    // Use fromHex instead, or call assertValidity() later.\n    _createClass(Point, [{\n      key: \"x\",\n      get: function get() {\n        return this.toAffine().x;\n      }\n    }, {\n      key: \"y\",\n      get: function get() {\n        return this.toAffine().y;\n      }\n      /**\n       * Takes a bunch of Projective Points but executes only one\n       * inversion on all of them. Inversion is very slow operation,\n       * so this improves performance massively.\n       * Optimization: converts a list of projective points to a list of identical points with Z=1.\n       */\n    }, {\n      key: \"_setWindowSize\",\n      value:\n      // \"Private method\", don't use it directly\n      function _setWindowSize(windowSize) {\n        this._WINDOW_SIZE = windowSize;\n        pointPrecomputes.delete(this);\n      }\n      // A point on curve is valid if it conforms to equation.\n    }, {\n      key: \"assertValidity\",\n      value: function assertValidity() {\n        // Zero is valid point too!\n        if (this.is0()) {\n          if (CURVE.allowInfinityPoint) return;\n          throw new Error('bad point: ZERO');\n        }\n        // Some 3rd-party test vectors require different wording between here & `fromCompressedHex`\n        var _this$toAffine = this.toAffine(),\n          x = _this$toAffine.x,\n          y = _this$toAffine.y;\n        // Check if x, y are valid field elements\n        if (!Fp.isValid(x) || !Fp.isValid(y)) throw new Error('bad point: x or y not FE');\n        var left = Fp.sqr(y); // y²\n        var right = weierstrassEquation(x); // x³ + ax + b\n        if (!Fp.eql(left, right)) throw new Error('bad point: equation left != right');\n        if (!this.isTorsionFree()) throw new Error('bad point: not in prime-order subgroup');\n      }\n    }, {\n      key: \"hasEvenY\",\n      value: function hasEvenY() {\n        var _this$toAffine2 = this.toAffine(),\n          y = _this$toAffine2.y;\n        if (Fp.isOdd) return !Fp.isOdd(y);\n        throw new Error(\"Field doesn't support isOdd\");\n      }\n      /**\n       * Compare one point to another.\n       */\n    }, {\n      key: \"equals\",\n      value: function equals(other) {\n        assertPrjPoint(other);\n        var X1 = this.px,\n          Y1 = this.py,\n          Z1 = this.pz;\n        var X2 = other.px,\n          Y2 = other.py,\n          Z2 = other.pz;\n        var U1 = Fp.eql(Fp.mul(X1, Z2), Fp.mul(X2, Z1));\n        var U2 = Fp.eql(Fp.mul(Y1, Z2), Fp.mul(Y2, Z1));\n        return U1 && U2;\n      }\n      /**\n       * Flips point to one corresponding to (x, -y) in Affine coordinates.\n       */\n    }, {\n      key: \"negate\",\n      value: function negate() {\n        return new Point(this.px, Fp.neg(this.py), this.pz);\n      }\n      // Renes-Costello-Batina exception-free doubling formula.\n      // There is 30% faster Jacobian formula, but it is not complete.\n      // https://eprint.iacr.org/2015/1060, algorithm 3\n      // Cost: 8M + 3S + 3*a + 2*b3 + 15add.\n    }, {\n      key: \"double\",\n      value: function double() {\n        var a = CURVE.a,\n          b = CURVE.b;\n        var b3 = Fp.mul(b, _3n);\n        var X1 = this.px,\n          Y1 = this.py,\n          Z1 = this.pz;\n        var X3 = Fp.ZERO,\n          Y3 = Fp.ZERO,\n          Z3 = Fp.ZERO; // prettier-ignore\n        var t0 = Fp.mul(X1, X1); // step 1\n        var t1 = Fp.mul(Y1, Y1);\n        var t2 = Fp.mul(Z1, Z1);\n        var t3 = Fp.mul(X1, Y1);\n        t3 = Fp.add(t3, t3); // step 5\n        Z3 = Fp.mul(X1, Z1);\n        Z3 = Fp.add(Z3, Z3);\n        X3 = Fp.mul(a, Z3);\n        Y3 = Fp.mul(b3, t2);\n        Y3 = Fp.add(X3, Y3); // step 10\n        X3 = Fp.sub(t1, Y3);\n        Y3 = Fp.add(t1, Y3);\n        Y3 = Fp.mul(X3, Y3);\n        X3 = Fp.mul(t3, X3);\n        Z3 = Fp.mul(b3, Z3); // step 15\n        t2 = Fp.mul(a, t2);\n        t3 = Fp.sub(t0, t2);\n        t3 = Fp.mul(a, t3);\n        t3 = Fp.add(t3, Z3);\n        Z3 = Fp.add(t0, t0); // step 20\n        t0 = Fp.add(Z3, t0);\n        t0 = Fp.add(t0, t2);\n        t0 = Fp.mul(t0, t3);\n        Y3 = Fp.add(Y3, t0);\n        t2 = Fp.mul(Y1, Z1); // step 25\n        t2 = Fp.add(t2, t2);\n        t0 = Fp.mul(t2, t3);\n        X3 = Fp.sub(X3, t0);\n        Z3 = Fp.mul(t2, t1);\n        Z3 = Fp.add(Z3, Z3); // step 30\n        Z3 = Fp.add(Z3, Z3);\n        return new Point(X3, Y3, Z3);\n      }\n      // Renes-Costello-Batina exception-free addition formula.\n      // There is 30% faster Jacobian formula, but it is not complete.\n      // https://eprint.iacr.org/2015/1060, algorithm 1\n      // Cost: 12M + 0S + 3*a + 3*b3 + 23add.\n    }, {\n      key: \"add\",\n      value: function add(other) {\n        assertPrjPoint(other);\n        var X1 = this.px,\n          Y1 = this.py,\n          Z1 = this.pz;\n        var X2 = other.px,\n          Y2 = other.py,\n          Z2 = other.pz;\n        var X3 = Fp.ZERO,\n          Y3 = Fp.ZERO,\n          Z3 = Fp.ZERO; // prettier-ignore\n        var a = CURVE.a;\n        var b3 = Fp.mul(CURVE.b, _3n);\n        var t0 = Fp.mul(X1, X2); // step 1\n        var t1 = Fp.mul(Y1, Y2);\n        var t2 = Fp.mul(Z1, Z2);\n        var t3 = Fp.add(X1, Y1);\n        var t4 = Fp.add(X2, Y2); // step 5\n        t3 = Fp.mul(t3, t4);\n        t4 = Fp.add(t0, t1);\n        t3 = Fp.sub(t3, t4);\n        t4 = Fp.add(X1, Z1);\n        var t5 = Fp.add(X2, Z2); // step 10\n        t4 = Fp.mul(t4, t5);\n        t5 = Fp.add(t0, t2);\n        t4 = Fp.sub(t4, t5);\n        t5 = Fp.add(Y1, Z1);\n        X3 = Fp.add(Y2, Z2); // step 15\n        t5 = Fp.mul(t5, X3);\n        X3 = Fp.add(t1, t2);\n        t5 = Fp.sub(t5, X3);\n        Z3 = Fp.mul(a, t4);\n        X3 = Fp.mul(b3, t2); // step 20\n        Z3 = Fp.add(X3, Z3);\n        X3 = Fp.sub(t1, Z3);\n        Z3 = Fp.add(t1, Z3);\n        Y3 = Fp.mul(X3, Z3);\n        t1 = Fp.add(t0, t0); // step 25\n        t1 = Fp.add(t1, t0);\n        t2 = Fp.mul(a, t2);\n        t4 = Fp.mul(b3, t4);\n        t1 = Fp.add(t1, t2);\n        t2 = Fp.sub(t0, t2); // step 30\n        t2 = Fp.mul(a, t2);\n        t4 = Fp.add(t4, t2);\n        t0 = Fp.mul(t1, t4);\n        Y3 = Fp.add(Y3, t0);\n        t0 = Fp.mul(t5, t4); // step 35\n        X3 = Fp.mul(t3, X3);\n        X3 = Fp.sub(X3, t0);\n        t0 = Fp.mul(t3, t1);\n        Z3 = Fp.mul(t5, Z3);\n        Z3 = Fp.add(Z3, t0); // step 40\n        return new Point(X3, Y3, Z3);\n      }\n    }, {\n      key: \"subtract\",\n      value: function subtract(other) {\n        return this.add(other.negate());\n      }\n    }, {\n      key: \"is0\",\n      value: function is0() {\n        return this.equals(Point.ZERO);\n      }\n    }, {\n      key: \"wNAF\",\n      value: function wNAF(n) {\n        return wnaf.wNAFCached(this, pointPrecomputes, n, function (comp) {\n          var toInv = Fp.invertBatch(comp.map(function (p) {\n            return p.pz;\n          }));\n          return comp.map(function (p, i) {\n            return p.toAffine(toInv[i]);\n          }).map(Point.fromAffine);\n        });\n      }\n      /**\n       * Non-constant-time multiplication. Uses double-and-add algorithm.\n       * It's faster, but should only be used when you don't care about\n       * an exposed private key e.g. sig verification, which works over *public* keys.\n       */\n    }, {\n      key: \"multiplyUnsafe\",\n      value: function multiplyUnsafe(n) {\n        var I = Point.ZERO;\n        if (n === _0n) return I;\n        assertGE(n); // Will throw on 0\n        if (n === _1n) return this;\n        var endo = CURVE.endo;\n        if (!endo) return wnaf.unsafeLadder(this, n);\n        // Apply endomorphism\n        var _endo$splitScalar = endo.splitScalar(n),\n          k1neg = _endo$splitScalar.k1neg,\n          k1 = _endo$splitScalar.k1,\n          k2neg = _endo$splitScalar.k2neg,\n          k2 = _endo$splitScalar.k2;\n        var k1p = I;\n        var k2p = I;\n        var d = this;\n        while (k1 > _0n || k2 > _0n) {\n          if (k1 & _1n) k1p = k1p.add(d);\n          if (k2 & _1n) k2p = k2p.add(d);\n          d = d.double();\n          k1 >>= _1n;\n          k2 >>= _1n;\n        }\n        if (k1neg) k1p = k1p.negate();\n        if (k2neg) k2p = k2p.negate();\n        k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n        return k1p.add(k2p);\n      }\n      /**\n       * Constant time multiplication.\n       * Uses wNAF method. Windowed method may be 10% faster,\n       * but takes 2x longer to generate and consumes 2x memory.\n       * Uses precomputes when available.\n       * Uses endomorphism for Koblitz curves.\n       * @param scalar by which the point would be multiplied\n       * @returns New point\n       */\n    }, {\n      key: \"multiply\",\n      value: function multiply(scalar) {\n        assertGE(scalar);\n        var n = scalar;\n        var point, fake; // Fake point is used to const-time mult\n        var endo = CURVE.endo;\n        if (endo) {\n          var _endo$splitScalar2 = endo.splitScalar(n),\n            k1neg = _endo$splitScalar2.k1neg,\n            k1 = _endo$splitScalar2.k1,\n            k2neg = _endo$splitScalar2.k2neg,\n            k2 = _endo$splitScalar2.k2;\n          var _this$wNAF = this.wNAF(k1),\n            k1p = _this$wNAF.p,\n            f1p = _this$wNAF.f;\n          var _this$wNAF2 = this.wNAF(k2),\n            k2p = _this$wNAF2.p,\n            f2p = _this$wNAF2.f;\n          k1p = wnaf.constTimeNegate(k1neg, k1p);\n          k2p = wnaf.constTimeNegate(k2neg, k2p);\n          k2p = new Point(Fp.mul(k2p.px, endo.beta), k2p.py, k2p.pz);\n          point = k1p.add(k2p);\n          fake = f1p.add(f2p);\n        } else {\n          var _this$wNAF3 = this.wNAF(n),\n            p = _this$wNAF3.p,\n            f = _this$wNAF3.f;\n          point = p;\n          fake = f;\n        }\n        // Normalize `z` for both points, but return only real one\n        return Point.normalizeZ([point, fake])[0];\n      }\n      /**\n       * Efficiently calculate `aP + bQ`. Unsafe, can expose private key, if used incorrectly.\n       * Not using Strauss-Shamir trick: precomputation tables are faster.\n       * The trick could be useful if both P and Q are not G (not in our case).\n       * @returns non-zero affine point\n       */\n    }, {\n      key: \"multiplyAndAddUnsafe\",\n      value: function multiplyAndAddUnsafe(Q, a, b) {\n        var G = Point.BASE; // No Strauss-Shamir trick: we have 10% faster G precomputes\n        var mul = function mul(P, a // Select faster multiply() method\n        ) {\n          return a === _0n || a === _1n || !P.equals(G) ? P.multiplyUnsafe(a) : P.multiply(a);\n        };\n        var sum = mul(this, a).add(mul(Q, b));\n        return sum.is0() ? undefined : sum;\n      }\n      // Converts Projective point to affine (x, y) coordinates.\n      // Can accept precomputed Z^-1 - for example, from invertBatch.\n      // (x, y, z) ∋ (x=x/z, y=y/z)\n    }, {\n      key: \"toAffine\",\n      value: function toAffine(iz) {\n        var x = this.px,\n          y = this.py,\n          z = this.pz;\n        var is0 = this.is0();\n        // If invZ was 0, we return zero point. However we still want to execute\n        // all operations, so we replace invZ with a random number, 1.\n        if (iz == null) iz = is0 ? Fp.ONE : Fp.inv(z);\n        var ax = Fp.mul(x, iz);\n        var ay = Fp.mul(y, iz);\n        var zz = Fp.mul(z, iz);\n        if (is0) return {\n          x: Fp.ZERO,\n          y: Fp.ZERO\n        };\n        if (!Fp.eql(zz, Fp.ONE)) throw new Error('invZ was invalid');\n        return {\n          x: ax,\n          y: ay\n        };\n      }\n    }, {\n      key: \"isTorsionFree\",\n      value: function isTorsionFree() {\n        var cofactor = CURVE.h,\n          isTorsionFree = CURVE.isTorsionFree;\n        if (cofactor === _1n) return true; // No subgroups, always torsion-free\n        if (isTorsionFree) return isTorsionFree(Point, this);\n        throw new Error('isTorsionFree() has not been declared for the elliptic curve');\n      }\n    }, {\n      key: \"clearCofactor\",\n      value: function clearCofactor() {\n        var cofactor = CURVE.h,\n          clearCofactor = CURVE.clearCofactor;\n        if (cofactor === _1n) return this; // Fast-path\n        if (clearCofactor) return clearCofactor(Point, this);\n        return this.multiplyUnsafe(CURVE.h);\n      }\n    }, {\n      key: \"toRawBytes\",\n      value: function toRawBytes() {\n        var isCompressed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n        this.assertValidity();\n        return toBytes(Point, this, isCompressed);\n      }\n    }, {\n      key: \"toHex\",\n      value: function toHex() {\n        var isCompressed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n        return ut.bytesToHex(this.toRawBytes(isCompressed));\n      }\n    }], [{\n      key: \"fromAffine\",\n      value: function fromAffine(p) {\n        var _ref = p || {},\n          x = _ref.x,\n          y = _ref.y;\n        if (!p || !Fp.isValid(x) || !Fp.isValid(y)) throw new Error('invalid affine point');\n        if (p instanceof Point) throw new Error('projective point not allowed');\n        var is0 = function is0(i) {\n          return Fp.eql(i, Fp.ZERO);\n        };\n        // fromAffine(x:0, y:0) would produce (x:0, y:0, z:1), but we need (x:0, y:1, z:0)\n        if (is0(x) && is0(y)) return Point.ZERO;\n        return new Point(x, y, Fp.ONE);\n      }\n    }, {\n      key: \"normalizeZ\",\n      value: function normalizeZ(points) {\n        var toInv = Fp.invertBatch(points.map(function (p) {\n          return p.pz;\n        }));\n        return points.map(function (p, i) {\n          return p.toAffine(toInv[i]);\n        }).map(Point.fromAffine);\n      }\n      /**\n       * Converts hash string or Uint8Array to Point.\n       * @param hex short/long ECDSA hex\n       */\n    }, {\n      key: \"fromHex\",\n      value: function fromHex(hex) {\n        var P = Point.fromAffine(fromBytes((0, utils_js_1.ensureBytes)('pointHex', hex)));\n        P.assertValidity();\n        return P;\n      }\n      // Multiplies generator point by privateKey.\n    }, {\n      key: \"fromPrivateKey\",\n      value: function fromPrivateKey(privateKey) {\n        return Point.BASE.multiply(normPrivateKeyToScalar(privateKey));\n      }\n    }]);\n    return Point;\n  }();\n  Point.BASE = new Point(CURVE.Gx, CURVE.Gy, Fp.ONE);\n  Point.ZERO = new Point(Fp.ZERO, Fp.ONE, Fp.ZERO);\n  var _bits = CURVE.nBitLength;\n  var wnaf = (0, curve_js_1.wNAF)(Point, CURVE.endo ? Math.ceil(_bits / 2) : _bits);\n  // Validate if generator point is on curve\n  return {\n    CURVE: CURVE,\n    ProjectivePoint: Point,\n    normPrivateKeyToScalar: normPrivateKeyToScalar,\n    weierstrassEquation: weierstrassEquation,\n    isWithinCurveOrder: isWithinCurveOrder\n  };\n}\nexports.weierstrassPoints = weierstrassPoints;\nfunction validateOpts(curve) {\n  var opts = (0, curve_js_1.validateBasic)(curve);\n  ut.validateObject(opts, {\n    hash: 'hash',\n    hmac: 'function',\n    randomBytes: 'function'\n  }, {\n    bits2int: 'function',\n    bits2int_modN: 'function',\n    lowS: 'boolean'\n  });\n  return Object.freeze(_objectSpread({\n    lowS: true\n  }, opts));\n}\nfunction weierstrass(curveDef) {\n  var CURVE = validateOpts(curveDef);\n  var Fp = CURVE.Fp,\n    CURVE_ORDER = CURVE.n;\n  var compressedLen = Fp.BYTES + 1; // e.g. 33 for 32\n  var uncompressedLen = 2 * Fp.BYTES + 1; // e.g. 65 for 32\n  function isValidFieldElement(num) {\n    return _0n < num && num < Fp.ORDER; // 0 is banned since it's not invertible FE\n  }\n\n  function modN(a) {\n    return mod.mod(a, CURVE_ORDER);\n  }\n  function invN(a) {\n    return mod.invert(a, CURVE_ORDER);\n  }\n  var _weierstrassPoints = weierstrassPoints(_objectSpread(_objectSpread({}, CURVE), {}, {\n      toBytes: function toBytes(c, point, isCompressed) {\n        var a = point.toAffine();\n        var x = Fp.toBytes(a.x);\n        var cat = ut.concatBytes;\n        if (isCompressed) {\n          return cat(Uint8Array.from([point.hasEvenY() ? 0x02 : 0x03]), x);\n        } else {\n          return cat(Uint8Array.from([0x04]), x, Fp.toBytes(a.y));\n        }\n      },\n      fromBytes: function fromBytes(bytes) {\n        var len = bytes.length;\n        var head = bytes[0];\n        var tail = bytes.subarray(1);\n        // this.assertValidity() is done inside of fromHex\n        if (len === compressedLen && (head === 0x02 || head === 0x03)) {\n          var x = ut.bytesToNumberBE(tail);\n          if (!isValidFieldElement(x)) throw new Error('Point is not on curve');\n          var y2 = weierstrassEquation(x); // y² = x³ + ax + b\n          var y = Fp.sqrt(y2); // y = y² ^ (p+1)/4\n          var isYOdd = (y & _1n) === _1n;\n          // ECDSA\n          var isHeadOdd = (head & 1) === 1;\n          if (isHeadOdd !== isYOdd) y = Fp.neg(y);\n          return {\n            x: x,\n            y: y\n          };\n        } else if (len === uncompressedLen && head === 0x04) {\n          var _x = Fp.fromBytes(tail.subarray(0, Fp.BYTES));\n          var _y = Fp.fromBytes(tail.subarray(Fp.BYTES, 2 * Fp.BYTES));\n          return {\n            x: _x,\n            y: _y\n          };\n        } else {\n          throw new Error(\"Point of length \".concat(len, \" was invalid. Expected \").concat(compressedLen, \" compressed bytes or \").concat(uncompressedLen, \" uncompressed bytes\"));\n        }\n      }\n    })),\n    Point = _weierstrassPoints.ProjectivePoint,\n    normPrivateKeyToScalar = _weierstrassPoints.normPrivateKeyToScalar,\n    weierstrassEquation = _weierstrassPoints.weierstrassEquation,\n    isWithinCurveOrder = _weierstrassPoints.isWithinCurveOrder;\n  var numToNByteStr = function numToNByteStr(num) {\n    return ut.bytesToHex(ut.numberToBytesBE(num, CURVE.nByteLength));\n  };\n  function isBiggerThanHalfOrder(number) {\n    var HALF = CURVE_ORDER >> _1n;\n    return number > HALF;\n  }\n  function normalizeS(s) {\n    return isBiggerThanHalfOrder(s) ? modN(-s) : s;\n  }\n  // slice bytes num\n  var slcNum = function slcNum(b, from, to) {\n    return ut.bytesToNumberBE(b.slice(from, to));\n  };\n  /**\n   * ECDSA signature with its (r, s) properties. Supports DER & compact representations.\n   */\n  var Signature = /*#__PURE__*/function () {\n    function Signature(r, s, recovery) {\n      _classCallCheck(this, Signature);\n      this.r = r;\n      this.s = s;\n      this.recovery = recovery;\n      this.assertValidity();\n    }\n    // pair (bytes of r, bytes of s)\n    _createClass(Signature, [{\n      key: \"assertValidity\",\n      value: function assertValidity() {\n        // can use assertGE here\n        if (!isWithinCurveOrder(this.r)) throw new Error('r must be 0 < r < CURVE.n');\n        if (!isWithinCurveOrder(this.s)) throw new Error('s must be 0 < s < CURVE.n');\n      }\n    }, {\n      key: \"addRecoveryBit\",\n      value: function addRecoveryBit(recovery) {\n        return new Signature(this.r, this.s, recovery);\n      }\n    }, {\n      key: \"recoverPublicKey\",\n      value: function recoverPublicKey(msgHash) {\n        var r = this.r,\n          s = this.s,\n          rec = this.recovery;\n        var h = bits2int_modN((0, utils_js_1.ensureBytes)('msgHash', msgHash)); // Truncate hash\n        if (rec == null || ![0, 1, 2, 3].includes(rec)) throw new Error('recovery id invalid');\n        var radj = rec === 2 || rec === 3 ? r + CURVE.n : r;\n        if (radj >= Fp.ORDER) throw new Error('recovery id 2 or 3 invalid');\n        var prefix = (rec & 1) === 0 ? '02' : '03';\n        var R = Point.fromHex(prefix + numToNByteStr(radj));\n        var ir = invN(radj); // r^-1\n        var u1 = modN(-h * ir); // -hr^-1\n        var u2 = modN(s * ir); // sr^-1\n        var Q = Point.BASE.multiplyAndAddUnsafe(R, u1, u2); // (sr^-1)R-(hr^-1)G = -(hr^-1)G + (sr^-1)\n        if (!Q) throw new Error('point at infinify'); // unsafe is fine: no priv data leaked\n        Q.assertValidity();\n        return Q;\n      }\n      // Signatures should be low-s, to prevent malleability.\n    }, {\n      key: \"hasHighS\",\n      value: function hasHighS() {\n        return isBiggerThanHalfOrder(this.s);\n      }\n    }, {\n      key: \"normalizeS\",\n      value: function normalizeS() {\n        return this.hasHighS() ? new Signature(this.r, modN(-this.s), this.recovery) : this;\n      }\n      // DER-encoded\n    }, {\n      key: \"toDERRawBytes\",\n      value: function toDERRawBytes() {\n        return ut.hexToBytes(this.toDERHex());\n      }\n    }, {\n      key: \"toDERHex\",\n      value: function toDERHex() {\n        return exports.DER.hexFromSig({\n          r: this.r,\n          s: this.s\n        });\n      }\n      // padded bytes of r, then padded bytes of s\n    }, {\n      key: \"toCompactRawBytes\",\n      value: function toCompactRawBytes() {\n        return ut.hexToBytes(this.toCompactHex());\n      }\n    }, {\n      key: \"toCompactHex\",\n      value: function toCompactHex() {\n        return numToNByteStr(this.r) + numToNByteStr(this.s);\n      }\n    }], [{\n      key: \"fromCompact\",\n      value: function fromCompact(hex) {\n        var l = CURVE.nByteLength;\n        hex = (0, utils_js_1.ensureBytes)('compactSignature', hex, l * 2);\n        return new Signature(slcNum(hex, 0, l), slcNum(hex, l, 2 * l));\n      }\n      // DER encoded ECDSA signature\n      // https://bitcoin.stackexchange.com/questions/57644/what-are-the-parts-of-a-bitcoin-transaction-input-script\n    }, {\n      key: \"fromDER\",\n      value: function fromDER(hex) {\n        var _exports$DER$toSig = exports.DER.toSig((0, utils_js_1.ensureBytes)('DER', hex)),\n          r = _exports$DER$toSig.r,\n          s = _exports$DER$toSig.s;\n        return new Signature(r, s);\n      }\n    }]);\n    return Signature;\n  }();\n  var utils = {\n    isValidPrivateKey: function isValidPrivateKey(privateKey) {\n      try {\n        normPrivateKeyToScalar(privateKey);\n        return true;\n      } catch (error) {\n        return false;\n      }\n    },\n    normPrivateKeyToScalar: normPrivateKeyToScalar,\n    /**\n     * Produces cryptographically secure private key from random of size (nBitLength+64)\n     * as per FIPS 186 B.4.1 with modulo bias being neglible.\n     */\n    randomPrivateKey: function randomPrivateKey() {\n      var rand = CURVE.randomBytes(Fp.BYTES + 8);\n      var num = mod.hashToPrivateScalar(rand, CURVE_ORDER);\n      return ut.numberToBytesBE(num, CURVE.nByteLength);\n    },\n    /**\n     * Creates precompute table for an arbitrary EC point. Makes point \"cached\".\n     * Allows to massively speed-up `point.multiply(scalar)`.\n     * @returns cached point\n     * @example\n     * const fast = utils.precompute(8, ProjectivePoint.fromHex(someonesPubKey));\n     * fast.multiply(privKey); // much faster ECDH now\n     */\n    precompute: function precompute() {\n      var windowSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 8;\n      var point = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Point.BASE;\n      point._setWindowSize(windowSize);\n      point.multiply(BigInt(3)); // 3 is arbitrary, just need any number here\n      return point;\n    }\n  };\n  /**\n   * Computes public key for a private key. Checks for validity of the private key.\n   * @param privateKey private key\n   * @param isCompressed whether to return compact (default), or full key\n   * @returns Public key, full when isCompressed=false; short when isCompressed=true\n   */\n  function getPublicKey(privateKey) {\n    var isCompressed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    return Point.fromPrivateKey(privateKey).toRawBytes(isCompressed);\n  }\n  /**\n   * Quick and dirty check for item being public key. Does not validate hex, or being on-curve.\n   */\n  function isProbPub(item) {\n    var arr = item instanceof Uint8Array;\n    var str = typeof item === 'string';\n    var len = (arr || str) && item.length;\n    if (arr) return len === compressedLen || len === uncompressedLen;\n    if (str) return len === 2 * compressedLen || len === 2 * uncompressedLen;\n    if (item instanceof Point) return true;\n    return false;\n  }\n  /**\n   * ECDH (Elliptic Curve Diffie Hellman).\n   * Computes shared public key from private key and public key.\n   * Checks: 1) private key validity 2) shared key is on-curve.\n   * Does NOT hash the result.\n   * @param privateA private key\n   * @param publicB different public key\n   * @param isCompressed whether to return compact (default), or full key\n   * @returns shared public key\n   */\n  function getSharedSecret(privateA, publicB) {\n    var isCompressed = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    if (isProbPub(privateA)) throw new Error('first arg must be private key');\n    if (!isProbPub(publicB)) throw new Error('second arg must be public key');\n    var b = Point.fromHex(publicB); // check for being on-curve\n    return b.multiply(normPrivateKeyToScalar(privateA)).toRawBytes(isCompressed);\n  }\n  // RFC6979: ensure ECDSA msg is X bytes and < N. RFC suggests optional truncating via bits2octets.\n  // FIPS 186-4 4.6 suggests the leftmost min(nBitLen, outLen) bits, which matches bits2int.\n  // bits2int can produce res>N, we can do mod(res, N) since the bitLen is the same.\n  // int2octets can't be used; pads small msgs with 0: unacceptatble for trunc as per RFC vectors\n  var bits2int = CURVE.bits2int || function (bytes) {\n    // For curves with nBitLength % 8 !== 0: bits2octets(bits2octets(m)) !== bits2octets(m)\n    // for some cases, since bytes.length * 8 is not actual bitLength.\n    var num = ut.bytesToNumberBE(bytes); // check for == u8 done here\n    var delta = bytes.length * 8 - CURVE.nBitLength; // truncate to nBitLength leftmost bits\n    return delta > 0 ? num >> BigInt(delta) : num;\n  };\n  var bits2int_modN = CURVE.bits2int_modN || function (bytes) {\n    return modN(bits2int(bytes)); // can't use bytesToNumberBE here\n  };\n  // NOTE: pads output with zero as per spec\n  var ORDER_MASK = ut.bitMask(CURVE.nBitLength);\n  /**\n   * Converts to bytes. Checks if num in `[0..ORDER_MASK-1]` e.g.: `[0..2^256-1]`.\n   */\n  function int2octets(num) {\n    if (typeof num !== 'bigint') throw new Error('bigint expected');\n    if (!(_0n <= num && num < ORDER_MASK)) throw new Error(\"bigint expected < 2^\".concat(CURVE.nBitLength));\n    // works with order, can have different size than numToField!\n    return ut.numberToBytesBE(num, CURVE.nByteLength);\n  }\n  // Steps A, D of RFC6979 3.2\n  // Creates RFC6979 seed; converts msg/privKey to numbers.\n  // Used only in sign, not in verify.\n  // NOTE: we cannot assume here that msgHash has same amount of bytes as curve order, this will be wrong at least for P521.\n  // Also it can be bigger for P224 + SHA256\n  function prepSig(msgHash, privateKey) {\n    var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultSigOpts;\n    if (['recovered', 'canonical'].some(function (k) {\n      return k in opts;\n    })) throw new Error('sign() legacy options not supported');\n    var hash = CURVE.hash,\n      randomBytes = CURVE.randomBytes;\n    var lowS = opts.lowS,\n      prehash = opts.prehash,\n      ent = opts.extraEntropy; // generates low-s sigs by default\n    if (lowS == null) lowS = true; // RFC6979 3.2: we skip step A, because we already provide hash\n    msgHash = (0, utils_js_1.ensureBytes)('msgHash', msgHash);\n    if (prehash) msgHash = (0, utils_js_1.ensureBytes)('prehashed msgHash', hash(msgHash));\n    // We can't later call bits2octets, since nested bits2int is broken for curves\n    // with nBitLength % 8 !== 0. Because of that, we unwrap it here as int2octets call.\n    // const bits2octets = (bits) => int2octets(bits2int_modN(bits))\n    var h1int = bits2int_modN(msgHash);\n    var d = normPrivateKeyToScalar(privateKey); // validate private key, convert to bigint\n    var seedArgs = [int2octets(d), int2octets(h1int)];\n    // extraEntropy. RFC6979 3.6: additional k' (optional).\n    if (ent != null) {\n      // K = HMAC_K(V || 0x00 || int2octets(x) || bits2octets(h1) || k')\n      var e = ent === true ? randomBytes(Fp.BYTES) : ent; // generate random bytes OR pass as-is\n      seedArgs.push((0, utils_js_1.ensureBytes)('extraEntropy', e, Fp.BYTES)); // check for being of size BYTES\n    }\n\n    var seed = ut.concatBytes.apply(ut, seedArgs); // Step D of RFC6979 3.2\n    var m = h1int; // NOTE: no need to call bits2int second time here, it is inside truncateHash!\n    // Converts signature params into point w r/s, checks result for validity.\n    function k2sig(kBytes) {\n      // RFC 6979 Section 3.2, step 3: k = bits2int(T)\n      var k = bits2int(kBytes); // Cannot use fields methods, since it is group element\n      if (!isWithinCurveOrder(k)) return; // Important: all mod() calls here must be done over N\n      var ik = invN(k); // k^-1 mod n\n      var q = Point.BASE.multiply(k).toAffine(); // q = Gk\n      var r = modN(q.x); // r = q.x mod n\n      if (r === _0n) return;\n      // Can use scalar blinding b^-1(bm + bdr) where b ∈ [1,q−1] according to\n      // https://tches.iacr.org/index.php/TCHES/article/view/7337/6509. We've decided against it:\n      // a) dependency on CSPRNG b) 15% slowdown c) doesn't really help since bigints are not CT\n      var s = modN(ik * modN(m + r * d)); // Not using blinding here\n      if (s === _0n) return;\n      var recovery = (q.x === r ? 0 : 2) | Number(q.y & _1n); // recovery bit (2 or 3, when q.x > n)\n      var normS = s;\n      if (lowS && isBiggerThanHalfOrder(s)) {\n        normS = normalizeS(s); // if lowS was passed, ensure s is always\n        recovery ^= 1; // // in the bottom half of N\n      }\n\n      return new Signature(r, normS, recovery); // use normS, not s\n    }\n\n    return {\n      seed: seed,\n      k2sig: k2sig\n    };\n  }\n  var defaultSigOpts = {\n    lowS: CURVE.lowS,\n    prehash: false\n  };\n  var defaultVerOpts = {\n    lowS: CURVE.lowS,\n    prehash: false\n  };\n  /**\n   * Signs message hash with a private key.\n   * ```\n   * sign(m, d, k) where\n   *   (x, y) = G × k\n   *   r = x mod n\n   *   s = (m + dr)/k mod n\n   * ```\n   * @param msgHash NOT message. msg needs to be hashed to `msgHash`, or use `prehash`.\n   * @param privKey private key\n   * @param opts lowS for non-malleable sigs. extraEntropy for mixing randomness into k. prehash will hash first arg.\n   * @returns signature with recovery param\n   */\n  function sign(msgHash, privKey) {\n    var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultSigOpts;\n    var _prepSig = prepSig(msgHash, privKey, opts),\n      seed = _prepSig.seed,\n      k2sig = _prepSig.k2sig; // Steps A, D of RFC6979 3.2.\n    var C = CURVE;\n    var drbg = ut.createHmacDrbg(C.hash.outputLen, C.nByteLength, C.hmac);\n    return drbg(seed, k2sig); // Steps B, C, D, E, F, G\n  }\n  // Enable precomputes. Slows down first publicKey computation by 20ms.\n  Point.BASE._setWindowSize(8);\n  // utils.precompute(8, ProjectivePoint.BASE)\n  /**\n   * Verifies a signature against message hash and public key.\n   * Rejects lowS signatures by default: to override,\n   * specify option `{lowS: false}`. Implements section 4.1.4 from https://www.secg.org/sec1-v2.pdf:\n   *\n   * ```\n   * verify(r, s, h, P) where\n   *   U1 = hs^-1 mod n\n   *   U2 = rs^-1 mod n\n   *   R = U1⋅G - U2⋅P\n   *   mod(R.x, n) == r\n   * ```\n   */\n  function verify(signature, msgHash, publicKey) {\n    var _Point$BASE$multiplyA;\n    var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : defaultVerOpts;\n    var sg = signature;\n    msgHash = (0, utils_js_1.ensureBytes)('msgHash', msgHash);\n    publicKey = (0, utils_js_1.ensureBytes)('publicKey', publicKey);\n    if ('strict' in opts) throw new Error('options.strict was renamed to lowS');\n    var lowS = opts.lowS,\n      prehash = opts.prehash;\n    var _sig = undefined;\n    var P;\n    try {\n      if (typeof sg === 'string' || sg instanceof Uint8Array) {\n        // Signature can be represented in 2 ways: compact (2*nByteLength) & DER (variable-length).\n        // Since DER can also be 2*nByteLength bytes, we check for it first.\n        try {\n          _sig = Signature.fromDER(sg);\n        } catch (derError) {\n          if (!(derError instanceof exports.DER.Err)) throw derError;\n          _sig = Signature.fromCompact(sg);\n        }\n      } else if (typeof sg === 'object' && typeof sg.r === 'bigint' && typeof sg.s === 'bigint') {\n        var _r = sg.r,\n          _s = sg.s;\n        _sig = new Signature(_r, _s);\n      } else {\n        throw new Error('PARSE');\n      }\n      P = Point.fromHex(publicKey);\n    } catch (error) {\n      if (error.message === 'PARSE') throw new Error(\"signature must be Signature instance, Uint8Array or hex string\");\n      return false;\n    }\n    if (lowS && _sig.hasHighS()) return false;\n    if (prehash) msgHash = CURVE.hash(msgHash);\n    var _sig2 = _sig,\n      r = _sig2.r,\n      s = _sig2.s;\n    var h = bits2int_modN(msgHash); // Cannot use fields methods, since it is group element\n    var is = invN(s); // s^-1\n    var u1 = modN(h * is); // u1 = hs^-1 mod n\n    var u2 = modN(r * is); // u2 = rs^-1 mod n\n    var R = (_Point$BASE$multiplyA = Point.BASE.multiplyAndAddUnsafe(P, u1, u2)) === null || _Point$BASE$multiplyA === void 0 ? void 0 : _Point$BASE$multiplyA.toAffine(); // R = u1⋅G + u2⋅P\n    if (!R) return false;\n    var v = modN(R.x);\n    return v === r;\n  }\n  return {\n    CURVE: CURVE,\n    getPublicKey: getPublicKey,\n    getSharedSecret: getSharedSecret,\n    sign: sign,\n    verify: verify,\n    ProjectivePoint: Point,\n    Signature: Signature,\n    utils: utils\n  };\n}\nexports.weierstrass = weierstrass;\n/**\n * Implementation of the Shallue and van de Woestijne method for any weierstrass curve.\n * TODO: check if there is a way to merge this with uvRatio in Edwards; move to modular.\n * b = True and y = sqrt(u / v) if (u / v) is square in F, and\n * b = False and y = sqrt(Z * (u / v)) otherwise.\n * @param Fp\n * @param Z\n * @returns\n */\nfunction SWUFpSqrtRatio(Fp, Z) {\n  // Generic implementation\n  var q = Fp.ORDER;\n  var l = _0n;\n  for (var o = q - _1n; o % _2n === _0n; o /= _2n) l += _1n;\n  var c1 = l; // 1. c1, the largest integer such that 2^c1 divides q - 1.\n  // We need 2n ** c1 and 2n ** (c1-1). We can't use **; but we can use <<.\n  // 2n ** c1 == 2n << (c1-1)\n  var _2n_pow_c1_1 = _2n << c1 - _1n - _1n;\n  var _2n_pow_c1 = _2n_pow_c1_1 * _2n;\n  var c2 = (q - _1n) / _2n_pow_c1; // 2. c2 = (q - 1) / (2^c1)  # Integer arithmetic\n  var c3 = (c2 - _1n) / _2n; // 3. c3 = (c2 - 1) / 2            # Integer arithmetic\n  var c4 = _2n_pow_c1 - _1n; // 4. c4 = 2^c1 - 1                # Integer arithmetic\n  var c5 = _2n_pow_c1_1; // 5. c5 = 2^(c1 - 1)                  # Integer arithmetic\n  var c6 = Fp.pow(Z, c2); // 6. c6 = Z^c2\n  var c7 = Fp.pow(Z, (c2 + _1n) / _2n); // 7. c7 = Z^((c2 + 1) / 2)\n  var sqrtRatio = function sqrtRatio(u, v) {\n    var tv1 = c6; // 1. tv1 = c6\n    var tv2 = Fp.pow(v, c4); // 2. tv2 = v^c4\n    var tv3 = Fp.sqr(tv2); // 3. tv3 = tv2^2\n    tv3 = Fp.mul(tv3, v); // 4. tv3 = tv3 * v\n    var tv5 = Fp.mul(u, tv3); // 5. tv5 = u * tv3\n    tv5 = Fp.pow(tv5, c3); // 6. tv5 = tv5^c3\n    tv5 = Fp.mul(tv5, tv2); // 7. tv5 = tv5 * tv2\n    tv2 = Fp.mul(tv5, v); // 8. tv2 = tv5 * v\n    tv3 = Fp.mul(tv5, u); // 9. tv3 = tv5 * u\n    var tv4 = Fp.mul(tv3, tv2); // 10. tv4 = tv3 * tv2\n    tv5 = Fp.pow(tv4, c5); // 11. tv5 = tv4^c5\n    var isQR = Fp.eql(tv5, Fp.ONE); // 12. isQR = tv5 == 1\n    tv2 = Fp.mul(tv3, c7); // 13. tv2 = tv3 * c7\n    tv5 = Fp.mul(tv4, tv1); // 14. tv5 = tv4 * tv1\n    tv3 = Fp.cmov(tv2, tv3, isQR); // 15. tv3 = CMOV(tv2, tv3, isQR)\n    tv4 = Fp.cmov(tv5, tv4, isQR); // 16. tv4 = CMOV(tv5, tv4, isQR)\n    // 17. for i in (c1, c1 - 1, ..., 2):\n    for (var i = c1; i > _1n; i--) {\n      var _tv = i - _2n; // 18.    tv5 = i - 2\n      _tv = _2n << _tv - _1n; // 19.    tv5 = 2^tv5\n      var tvv5 = Fp.pow(tv4, _tv); // 20.    tv5 = tv4^tv5\n      var e1 = Fp.eql(tvv5, Fp.ONE); // 21.    e1 = tv5 == 1\n      tv2 = Fp.mul(tv3, tv1); // 22.    tv2 = tv3 * tv1\n      tv1 = Fp.mul(tv1, tv1); // 23.    tv1 = tv1 * tv1\n      tvv5 = Fp.mul(tv4, tv1); // 24.    tv5 = tv4 * tv1\n      tv3 = Fp.cmov(tv2, tv3, e1); // 25.    tv3 = CMOV(tv2, tv3, e1)\n      tv4 = Fp.cmov(tvv5, tv4, e1); // 26.    tv4 = CMOV(tv5, tv4, e1)\n    }\n\n    return {\n      isValid: isQR,\n      value: tv3\n    };\n  };\n  if (Fp.ORDER % _4n === _3n) {\n    // sqrt_ratio_3mod4(u, v)\n    var _c = (Fp.ORDER - _3n) / _4n; // 1. c1 = (q - 3) / 4     # Integer arithmetic\n    var _c2 = Fp.sqrt(Fp.neg(Z)); // 2. c2 = sqrt(-Z)\n    sqrtRatio = function sqrtRatio(u, v) {\n      var tv1 = Fp.sqr(v); // 1. tv1 = v^2\n      var tv2 = Fp.mul(u, v); // 2. tv2 = u * v\n      tv1 = Fp.mul(tv1, tv2); // 3. tv1 = tv1 * tv2\n      var y1 = Fp.pow(tv1, _c); // 4. y1 = tv1^c1\n      y1 = Fp.mul(y1, tv2); // 5. y1 = y1 * tv2\n      var y2 = Fp.mul(y1, _c2); // 6. y2 = y1 * c2\n      var tv3 = Fp.mul(Fp.sqr(y1), v); // 7. tv3 = y1^2; 8. tv3 = tv3 * v\n      var isQR = Fp.eql(tv3, u); // 9. isQR = tv3 == u\n      var y = Fp.cmov(y2, y1, isQR); // 10. y = CMOV(y2, y1, isQR)\n      return {\n        isValid: isQR,\n        value: y\n      }; // 11. return (isQR, y) isQR ? y : y*c2\n    };\n  }\n  // No curves uses that\n  // if (Fp.ORDER % _8n === _5n) // sqrt_ratio_5mod8\n  return sqrtRatio;\n}\nexports.SWUFpSqrtRatio = SWUFpSqrtRatio;\n/**\n * From draft-irtf-cfrg-hash-to-curve-16\n */\nfunction mapToCurveSimpleSWU(Fp, opts) {\n  mod.validateField(Fp);\n  if (!Fp.isValid(opts.A) || !Fp.isValid(opts.B) || !Fp.isValid(opts.Z)) throw new Error('mapToCurveSimpleSWU: invalid opts');\n  var sqrtRatio = SWUFpSqrtRatio(Fp, opts.Z);\n  if (!Fp.isOdd) throw new Error('Fp.isOdd is not implemented!');\n  // Input: u, an element of F.\n  // Output: (x, y), a point on E.\n  return function (u) {\n    // prettier-ignore\n    var tv1, tv2, tv3, tv4, tv5, tv6, x, y;\n    tv1 = Fp.sqr(u); // 1.  tv1 = u^2\n    tv1 = Fp.mul(tv1, opts.Z); // 2.  tv1 = Z * tv1\n    tv2 = Fp.sqr(tv1); // 3.  tv2 = tv1^2\n    tv2 = Fp.add(tv2, tv1); // 4.  tv2 = tv2 + tv1\n    tv3 = Fp.add(tv2, Fp.ONE); // 5.  tv3 = tv2 + 1\n    tv3 = Fp.mul(tv3, opts.B); // 6.  tv3 = B * tv3\n    tv4 = Fp.cmov(opts.Z, Fp.neg(tv2), !Fp.eql(tv2, Fp.ZERO)); // 7.  tv4 = CMOV(Z, -tv2, tv2 != 0)\n    tv4 = Fp.mul(tv4, opts.A); // 8.  tv4 = A * tv4\n    tv2 = Fp.sqr(tv3); // 9.  tv2 = tv3^2\n    tv6 = Fp.sqr(tv4); // 10. tv6 = tv4^2\n    tv5 = Fp.mul(tv6, opts.A); // 11. tv5 = A * tv6\n    tv2 = Fp.add(tv2, tv5); // 12. tv2 = tv2 + tv5\n    tv2 = Fp.mul(tv2, tv3); // 13. tv2 = tv2 * tv3\n    tv6 = Fp.mul(tv6, tv4); // 14. tv6 = tv6 * tv4\n    tv5 = Fp.mul(tv6, opts.B); // 15. tv5 = B * tv6\n    tv2 = Fp.add(tv2, tv5); // 16. tv2 = tv2 + tv5\n    x = Fp.mul(tv1, tv3); // 17.   x = tv1 * tv3\n    var _sqrtRatio = sqrtRatio(tv2, tv6),\n      isValid = _sqrtRatio.isValid,\n      value = _sqrtRatio.value; // 18. (is_gx1_square, y1) = sqrt_ratio(tv2, tv6)\n    y = Fp.mul(tv1, u); // 19.   y = tv1 * u  -> Z * u^3 * y1\n    y = Fp.mul(y, value); // 20.   y = y * y1\n    x = Fp.cmov(x, tv3, isValid); // 21.   x = CMOV(x, tv3, is_gx1_square)\n    y = Fp.cmov(y, value, isValid); // 22.   y = CMOV(y, y1, is_gx1_square)\n    var e1 = Fp.isOdd(u) === Fp.isOdd(y); // 23.  e1 = sgn0(u) == sgn0(y)\n    y = Fp.cmov(Fp.neg(y), y, e1); // 24.   y = CMOV(-y, y, e1)\n    x = Fp.div(x, tv4); // 25.   x = x / tv4\n    return {\n      x: x,\n      y: y\n    };\n  };\n}\nexports.mapToCurveSimpleSWU = mapToCurveSimpleSWU;","map":{"version":3,"names":["mod","require","ut","utils_js_1","curve_js_1","validatePointOpts","curve","opts","validateBasic","validateObject","a","b","allowedPrivateKeyLengths","wrapPrivateKey","isTorsionFree","clearCofactor","allowInfinityPoint","fromBytes","toBytes","endo","Fp","eql","ZERO","Error","beta","splitScalar","Object","freeze","_objectSpread","b2n","bytesToNumberBE","h2b","hexToBytes","exports","DER","Err","_Error","_inherits","DERErr","_super","_createSuper","m","arguments","length","undefined","_classCallCheck","call","_createClass","_wrapNativeSuper","_parseInt","data","E","len","res","subarray","d","l","toSig","hex","Uint8Array","_exports$DER$_parseIn","r","sBytes","_exports$DER$_parseIn2","s","rBytesLeft","hexFromSig","sig","slice","Number","parseInt","h","num","toString","concat","shl","rhl","sl","rl","_0n","BigInt","_1n","_2n","_3n","_4n","weierstrassPoints","CURVE","c","point","isCompressed","toAffine","concatBytes","from","x","y","bytes","tail","BYTES","weierstrassEquation","x2","sqr","x3","mul","add","Gy","Gx","isWithinCurveOrder","n","assertGE","normPrivateKeyToScalar","key","lengths","nByteLength","bytesToHex","includes","padStart","ensureBytes","error","pointPrecomputes","Map","assertPrjPoint","other","Point","px","py","pz","isValid","get","value","_setWindowSize","windowSize","_WINDOW_SIZE","delete","assertValidity","is0","_this$toAffine","left","right","hasEvenY","_this$toAffine2","isOdd","equals","X1","Y1","Z1","X2","Y2","Z2","U1","U2","negate","neg","double","b3","X3","Y3","Z3","t0","t1","t2","t3","sub","t4","t5","subtract","wNAF","wnaf","wNAFCached","comp","toInv","invertBatch","map","p","i","fromAffine","multiplyUnsafe","I","unsafeLadder","_endo$splitScalar","k1neg","k1","k2neg","k2","k1p","k2p","multiply","scalar","fake","_endo$splitScalar2","_this$wNAF","f1p","f","_this$wNAF2","f2p","constTimeNegate","_this$wNAF3","normalizeZ","multiplyAndAddUnsafe","Q","G","BASE","P","sum","iz","z","ONE","inv","ax","ay","zz","cofactor","toRawBytes","toHex","_ref","points","fromHex","fromPrivateKey","privateKey","_bits","nBitLength","Math","ceil","ProjectivePoint","validateOpts","hash","hmac","randomBytes","bits2int","bits2int_modN","lowS","weierstrass","curveDef","CURVE_ORDER","compressedLen","uncompressedLen","isValidFieldElement","ORDER","modN","invN","invert","_weierstrassPoints","cat","head","y2","sqrt","isYOdd","isHeadOdd","numToNByteStr","numberToBytesBE","isBiggerThanHalfOrder","number","HALF","normalizeS","slcNum","to","Signature","recovery","addRecoveryBit","recoverPublicKey","msgHash","rec","radj","prefix","R","ir","u1","u2","hasHighS","toDERRawBytes","toDERHex","toCompactRawBytes","toCompactHex","fromCompact","fromDER","_exports$DER$toSig","utils","isValidPrivateKey","randomPrivateKey","rand","hashToPrivateScalar","precompute","getPublicKey","isProbPub","item","arr","str","getSharedSecret","privateA","publicB","delta","ORDER_MASK","bitMask","int2octets","prepSig","defaultSigOpts","some","k","prehash","ent","extraEntropy","h1int","seedArgs","e","push","seed","apply","k2sig","kBytes","ik","q","normS","defaultVerOpts","sign","privKey","_prepSig","C","drbg","createHmacDrbg","outputLen","verify","signature","publicKey","_Point$BASE$multiplyA","sg","_sig","derError","message","_sig2","is","v","SWUFpSqrtRatio","Z","o","c1","_2n_pow_c1_1","_2n_pow_c1","c2","c3","c4","c5","c6","pow","c7","sqrtRatio","u","tv1","tv2","tv3","tv5","tv4","isQR","cmov","tvv5","e1","y1","mapToCurveSimpleSWU","validateField","A","B","tv6","_sqrtRatio","div"],"sources":["../src/abstract/weierstrass.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script"}