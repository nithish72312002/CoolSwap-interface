{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(SubjectSubscriber, _super);\n  function SubjectSubscriber(destination) {\n    var _this = _super.call(this, destination) || this;\n    _this.destination = destination;\n    return _this;\n  }\n  return SubjectSubscriber;\n}(Subscriber);\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(Subject, _super);\n  function Subject() {\n    var _this = _super.call(this) || this;\n    _this.observers = [];\n    _this.closed = false;\n    _this.isStopped = false;\n    _this.hasError = false;\n    _this.thrownError = null;\n    return _this;\n  }\n  Subject.prototype[rxSubscriberSymbol] = function () {\n    return new SubjectSubscriber(this);\n  };\n  Subject.prototype.lift = function (operator) {\n    var subject = new AnonymousSubject(this, this);\n    subject.operator = operator;\n    return subject;\n  };\n  Subject.prototype.next = function (value) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    if (!this.isStopped) {\n      var observers = this.observers;\n      var len = observers.length;\n      var copy = observers.slice();\n      for (var i = 0; i < len; i++) {\n        copy[i].next(value);\n      }\n    }\n  };\n  Subject.prototype.error = function (err) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    this.hasError = true;\n    this.thrownError = err;\n    this.isStopped = true;\n    var observers = this.observers;\n    var len = observers.length;\n    var copy = observers.slice();\n    for (var i = 0; i < len; i++) {\n      copy[i].error(err);\n    }\n    this.observers.length = 0;\n  };\n  Subject.prototype.complete = function () {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n    this.isStopped = true;\n    var observers = this.observers;\n    var len = observers.length;\n    var copy = observers.slice();\n    for (var i = 0; i < len; i++) {\n      copy[i].complete();\n    }\n    this.observers.length = 0;\n  };\n  Subject.prototype.unsubscribe = function () {\n    this.isStopped = true;\n    this.closed = true;\n    this.observers = null;\n  };\n  Subject.prototype._trySubscribe = function (subscriber) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else {\n      return _super.prototype._trySubscribe.call(this, subscriber);\n    }\n  };\n  Subject.prototype._subscribe = function (subscriber) {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    } else if (this.hasError) {\n      subscriber.error(this.thrownError);\n      return Subscription.EMPTY;\n    } else if (this.isStopped) {\n      subscriber.complete();\n      return Subscription.EMPTY;\n    } else {\n      this.observers.push(subscriber);\n      return new SubjectSubscription(this, subscriber);\n    }\n  };\n  Subject.prototype.asObservable = function () {\n    var observable = new Observable();\n    observable.source = this;\n    return observable;\n  };\n  Subject.create = function (destination, source) {\n    return new AnonymousSubject(destination, source);\n  };\n  return Subject;\n}(Observable);\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(AnonymousSubject, _super);\n  function AnonymousSubject(destination, source) {\n    var _this = _super.call(this) || this;\n    _this.destination = destination;\n    _this.source = source;\n    return _this;\n  }\n  AnonymousSubject.prototype.next = function (value) {\n    var destination = this.destination;\n    if (destination && destination.next) {\n      destination.next(value);\n    }\n  };\n  AnonymousSubject.prototype.error = function (err) {\n    var destination = this.destination;\n    if (destination && destination.error) {\n      this.destination.error(err);\n    }\n  };\n  AnonymousSubject.prototype.complete = function () {\n    var destination = this.destination;\n    if (destination && destination.complete) {\n      this.destination.complete();\n    }\n  };\n  AnonymousSubject.prototype._subscribe = function (subscriber) {\n    var source = this.source;\n    if (source) {\n      return this.source.subscribe(subscriber);\n    } else {\n      return Subscription.EMPTY;\n    }\n  };\n  return AnonymousSubject;\n}(Subject);\nexport { AnonymousSubject };","map":{"version":3,"names":["tslib_1","Observable","Subscriber","Subscription","ObjectUnsubscribedError","SubjectSubscription","rxSubscriber","rxSubscriberSymbol","SubjectSubscriber","_super","__extends","destination","_this","call","Subject","observers","closed","isStopped","hasError","prototype","lift","operator","subject","AnonymousSubject","next","value","len","length","copy","slice","i","error","err","thrownError","complete","unsubscribe","_trySubscribe","subscriber","_subscribe","EMPTY","push","asObservable","observable","source","create","subscribe"],"sources":["../../src/internal/Subject.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module"}