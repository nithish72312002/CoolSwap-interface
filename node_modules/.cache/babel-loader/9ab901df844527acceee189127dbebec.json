{"ast":null,"code":"/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { map } from '../operators/map';\nvar toString = /*@__PURE__*/function () {\n  return Object.prototype.toString;\n}();\nexport function fromEvent(target, eventName, options, resultSelector) {\n  if (isFunction(options)) {\n    resultSelector = options;\n    options = undefined;\n  }\n  if (resultSelector) {\n    return fromEvent(target, eventName, options).pipe(map(function (args) {\n      return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args);\n    }));\n  }\n  return new Observable(function (subscriber) {\n    function handler(e) {\n      if (arguments.length > 1) {\n        subscriber.next(Array.prototype.slice.call(arguments));\n      } else {\n        subscriber.next(e);\n      }\n    }\n    setupSubscription(target, eventName, handler, subscriber, options);\n  });\n}\nfunction setupSubscription(sourceObj, eventName, handler, subscriber, options) {\n  var unsubscribe;\n  if (isEventTarget(sourceObj)) {\n    var source_1 = sourceObj;\n    sourceObj.addEventListener(eventName, handler, options);\n    unsubscribe = function unsubscribe() {\n      return source_1.removeEventListener(eventName, handler, options);\n    };\n  } else if (isJQueryStyleEventEmitter(sourceObj)) {\n    var source_2 = sourceObj;\n    sourceObj.on(eventName, handler);\n    unsubscribe = function unsubscribe() {\n      return source_2.off(eventName, handler);\n    };\n  } else if (isNodeStyleEventEmitter(sourceObj)) {\n    var source_3 = sourceObj;\n    sourceObj.addListener(eventName, handler);\n    unsubscribe = function unsubscribe() {\n      return source_3.removeListener(eventName, handler);\n    };\n  } else if (sourceObj && sourceObj.length) {\n    for (var i = 0, len = sourceObj.length; i < len; i++) {\n      setupSubscription(sourceObj[i], eventName, handler, subscriber, options);\n    }\n  } else {\n    throw new TypeError('Invalid event target');\n  }\n  subscriber.add(unsubscribe);\n}\nfunction isNodeStyleEventEmitter(sourceObj) {\n  return sourceObj && typeof sourceObj.addListener === 'function' && typeof sourceObj.removeListener === 'function';\n}\nfunction isJQueryStyleEventEmitter(sourceObj) {\n  return sourceObj && typeof sourceObj.on === 'function' && typeof sourceObj.off === 'function';\n}\nfunction isEventTarget(sourceObj) {\n  return sourceObj && typeof sourceObj.addEventListener === 'function' && typeof sourceObj.removeEventListener === 'function';\n}","map":{"version":3,"names":["Observable","isArray","isFunction","map","toString","Object","prototype","fromEvent","target","eventName","options","resultSelector","undefined","pipe","args","apply","subscriber","handler","e","arguments","length","next","Array","slice","call","setupSubscription","sourceObj","unsubscribe","isEventTarget","source_1","addEventListener","removeEventListener","isJQueryStyleEventEmitter","source_2","on","off","isNodeStyleEventEmitter","source_3","addListener","removeListener","i","len","TypeError","add"],"sources":["../../../src/internal/observable/fromEvent.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module"}