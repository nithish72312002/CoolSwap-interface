{"ast":null,"code":"import _slicedToArray from \"E:\\\\testprojects\\\\CoolSwap-interface\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport { TokenAmount, Pair } from '@uniswap/sdk';\nimport { useMemo } from 'react';\nimport { abi as IUniswapV2PairABI } from '@uniswap/v2-core/build/IUniswapV2Pair.json';\nimport { Interface } from '@ethersproject/abi';\nimport { useActiveWeb3React } from '../hooks';\nimport { useMultipleContractSingleData } from '../state/multicall/hooks';\nimport { wrappedCurrency } from '../utils/wrappedCurrency';\nvar PAIR_INTERFACE = new Interface(IUniswapV2PairABI);\nexport var PairState = /*#__PURE__*/function (PairState) {\n  PairState[PairState[\"LOADING\"] = 0] = \"LOADING\";\n  PairState[PairState[\"NOT_EXISTS\"] = 1] = \"NOT_EXISTS\";\n  PairState[PairState[\"EXISTS\"] = 2] = \"EXISTS\";\n  PairState[PairState[\"INVALID\"] = 3] = \"INVALID\";\n  return PairState;\n}({});\nexport function usePairs(currencies) {\n  var _useActiveWeb3React = useActiveWeb3React(),\n    chainId = _useActiveWeb3React.chainId;\n  var tokens = useMemo(function () {\n    return currencies.map(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        currencyA = _ref2[0],\n        currencyB = _ref2[1];\n      return [wrappedCurrency(currencyA, chainId), wrappedCurrency(currencyB, chainId)];\n    });\n  }, [chainId, currencies]);\n  var pairAddresses = useMemo(function () {\n    return tokens.map(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n        tokenA = _ref4[0],\n        tokenB = _ref4[1];\n      return tokenA && tokenB && !tokenA.equals(tokenB) ? Pair.getAddress(tokenA, tokenB) : undefined;\n    });\n  }, [tokens]);\n  // computePairAddress\n  var results = useMultipleContractSingleData(pairAddresses, PAIR_INTERFACE, 'getReserves');\n  console.groupEnd();\n  return useMemo(function () {\n    return results.map(function (result, i) {\n      var reserves = result.result,\n        loading = result.loading;\n      var tokenA = tokens[i][0];\n      var tokenB = tokens[i][1];\n      if (loading) return [PairState.LOADING, null];\n      if (!tokenA || !tokenB || tokenA.equals(tokenB)) return [PairState.INVALID, null];\n      if (!reserves) return [PairState.NOT_EXISTS, null];\n      var reserve0 = reserves.reserve0,\n        reserve1 = reserves.reserve1;\n      var _ref5 = tokenA.sortsBefore(tokenB) ? [tokenA, tokenB] : [tokenB, tokenA],\n        _ref6 = _slicedToArray(_ref5, 2),\n        token0 = _ref6[0],\n        token1 = _ref6[1];\n      return [PairState.EXISTS, new Pair(new TokenAmount(token0, reserve0.toString()), new TokenAmount(token1, reserve1.toString()))];\n    });\n  }, [results, tokens]);\n}\nexport function usePair(tokenA, tokenB) {\n  return usePairs([[tokenA, tokenB]])[0];\n}","map":{"version":3,"names":["TokenAmount","Pair","useMemo","abi","IUniswapV2PairABI","Interface","useActiveWeb3React","useMultipleContractSingleData","wrappedCurrency","PAIR_INTERFACE","PairState","usePairs","currencies","_useActiveWeb3React","chainId","tokens","map","_ref","_ref2","_slicedToArray","currencyA","currencyB","pairAddresses","_ref3","_ref4","tokenA","tokenB","equals","getAddress","undefined","results","console","groupEnd","result","i","reserves","loading","LOADING","INVALID","NOT_EXISTS","reserve0","reserve1","_ref5","sortsBefore","_ref6","token0","token1","EXISTS","toString","usePair"],"sources":["E:/testprojects/CoolSwap-interface/src/data/Reserves.ts"],"sourcesContent":["import { TokenAmount, Pair, Currency } from '@uniswap/sdk';\r\nimport { useMemo } from 'react';\r\nimport { abi as IUniswapV2PairABI } from '@uniswap/v2-core/build/IUniswapV2Pair.json';\r\nimport { Interface } from '@ethersproject/abi';\r\nimport { useActiveWeb3React } from '../hooks';\r\n\r\nimport { useMultipleContractSingleData } from '../state/multicall/hooks';\r\nimport { wrappedCurrency } from '../utils/wrappedCurrency';\r\n\r\nconst PAIR_INTERFACE = new Interface(IUniswapV2PairABI);\r\n\r\nexport enum PairState {\r\n  LOADING,\r\n  NOT_EXISTS,\r\n  EXISTS,\r\n  INVALID,\r\n}\r\n\r\nexport function usePairs(currencies: [Currency | undefined, Currency | undefined][]): [PairState, Pair | null][] {\r\n  const { chainId } = useActiveWeb3React();\r\n\r\n  const tokens = useMemo(\r\n    () =>\r\n      currencies.map(([currencyA, currencyB]) => [\r\n        wrappedCurrency(currencyA, chainId),\r\n        wrappedCurrency(currencyB, chainId),\r\n      ]),\r\n    [chainId, currencies]\r\n  );\r\n\r\n  const pairAddresses = useMemo(\r\n    () =>\r\n      tokens.map(([tokenA, tokenB]) => {\r\n        return tokenA && tokenB && !tokenA.equals(tokenB) ? Pair.getAddress(tokenA, tokenB) : undefined;\r\n      }),\r\n    [tokens]\r\n  );\r\n  // computePairAddress\r\n  const results = useMultipleContractSingleData(pairAddresses, PAIR_INTERFACE, 'getReserves');\r\n\r\n  console.groupEnd();\r\n\r\n  return useMemo(() => {\r\n    return results.map((result, i) => {\r\n      const { result: reserves, loading } = result;\r\n      const tokenA = tokens[i][0];\r\n      const tokenB = tokens[i][1];\r\n\r\n      if (loading) return [PairState.LOADING, null];\r\n      if (!tokenA || !tokenB || tokenA.equals(tokenB)) return [PairState.INVALID, null];\r\n      if (!reserves) return [PairState.NOT_EXISTS, null];\r\n      const { reserve0, reserve1 } = reserves;\r\n      const [token0, token1] = tokenA.sortsBefore(tokenB) ? [tokenA, tokenB] : [tokenB, tokenA];\r\n      return [\r\n        PairState.EXISTS,\r\n        new Pair(new TokenAmount(token0, reserve0.toString()), new TokenAmount(token1, reserve1.toString())),\r\n      ];\r\n    });\r\n  }, [results, tokens]);\r\n}\r\n\r\nexport function usePair(tokenA?: Currency, tokenB?: Currency): [PairState, Pair | null] {\r\n  return usePairs([[tokenA, tokenB]])[0];\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}